---
import Layout from '../layouts/Layout.astro';
import { JokeCard } from '../components/JokeCard';
import { CreateJokeForm } from '../components/CreateJokeForm';
import { Footer } from '../components/Footer';

const BASE_URL = import.meta.env.PUBLIC_BASE_URL;
const response = await fetch(`${BASE_URL}/joke/daily`);
const dailyJoke = await response.json();
---

<Layout title="Chiste del Día">
  <main class="max-w-4xl mx-auto px-4 py-8">
    <h1 class="text-6xl font-bold text-center text-gray-700 mb-10">
      Chiste del Día
    </h1>

    <section class="mb-12">
      <h2 class="text-2xl font-semibold text-gray-700 mb-6">
        Si no te ríes, pierdes y me debes una chocolatina 🍫
      </h2>
      <JokeCard joke={dailyJoke} baseUrl={BASE_URL} client:load />
    </section>

    <section class="mb-12">
      <h2 class="text-2xl font-semibold text-gray-700 mb-6">
        Envía un chiste para que se muestre algún día 📆
      </h2>
      <CreateJokeForm baseUrl={BASE_URL} client:load />
    </section>
  </main>

  <Footer />
</Layout>
